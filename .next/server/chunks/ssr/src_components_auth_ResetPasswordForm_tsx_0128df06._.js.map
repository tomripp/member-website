{"version":3,"sources":["../../../../src/components/auth/ResetPasswordForm.tsx"],"sourcesContent":["\"use client\";\n\nimport { useState } from \"react\";\nimport { useForm } from \"react-hook-form\";\nimport { zodResolver } from \"@hookform/resolvers/zod\";\nimport { z } from \"zod\";\nimport { useTranslations } from \"next-intl\";\nimport { useRouter, Link } from \"@/i18n/navigation\";\nimport { Button } from \"@/components/ui/button\";\nimport {\n  Form,\n  FormControl,\n  FormField,\n  FormItem,\n  FormLabel,\n  FormMessage,\n} from \"@/components/ui/form\";\nimport { Input } from \"@/components/ui/input\";\nimport { Alert, AlertDescription } from \"@/components/ui/alert\";\n\nconst formSchema = z\n  .object({\n    password: z.string().min(8),\n    confirm: z.string().min(8),\n  })\n  .refine((d) => d.password === d.confirm, {\n    message: \"Passwords do not match.\",\n    path: [\"confirm\"],\n  });\n\ntype FormData = z.infer<typeof formSchema>;\n\ninterface ResetPasswordFormProps {\n  token: string;\n}\n\nexport function ResetPasswordForm({ token }: ResetPasswordFormProps) {\n  const t = useTranslations(\"auth.reset_password\");\n  const router = useRouter();\n  const [error, setError] = useState<string | null>(null);\n  const [loading, setLoading] = useState(false);\n\n  const form = useForm<FormData>({\n    resolver: zodResolver(formSchema),\n    defaultValues: { password: \"\", confirm: \"\" },\n  });\n\n  const onSubmit = async (data: FormData) => {\n    setLoading(true);\n    setError(null);\n\n    try {\n      const res = await fetch(\"/api/auth/reset-password\", {\n        method: \"POST\",\n        headers: { \"Content-Type\": \"application/json\" },\n        body: JSON.stringify({ token, password: data.password }),\n      });\n\n      const json = await res.json();\n\n      if (!res.ok) {\n        setError(json.error ?? t(\"error\"));\n        return;\n      }\n\n      router.push(\"/auth/login?reset=success\");\n    } catch {\n      setError(t(\"error\"));\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  return (\n    <Form {...form}>\n      <form onSubmit={form.handleSubmit(onSubmit)} className=\"space-y-4\">\n        {error && (\n          <Alert variant=\"destructive\">\n            <AlertDescription>{error}</AlertDescription>\n          </Alert>\n        )}\n\n        <FormField\n          control={form.control}\n          name=\"password\"\n          render={({ field }) => (\n            <FormItem>\n              <FormLabel>{t(\"password\")}</FormLabel>\n              <FormControl>\n                <Input\n                  type=\"password\"\n                  autoComplete=\"new-password\"\n                  {...field}\n                />\n              </FormControl>\n              <FormMessage />\n            </FormItem>\n          )}\n        />\n\n        <FormField\n          control={form.control}\n          name=\"confirm\"\n          render={({ field }) => (\n            <FormItem>\n              <FormLabel>{t(\"password_confirm\")}</FormLabel>\n              <FormControl>\n                <Input\n                  type=\"password\"\n                  autoComplete=\"new-password\"\n                  {...field}\n                />\n              </FormControl>\n              <FormMessage />\n            </FormItem>\n          )}\n        />\n\n        <Button type=\"submit\" className=\"w-full\" disabled={loading}>\n          {loading ? \"...\" : t(\"submit\")}\n        </Button>\n      </form>\n    </Form>\n  );\n}\n"],"names":[],"mappings":"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"}