{"version":3,"sources":["../../../../src/components/auth/LoginForm.tsx"],"sourcesContent":["\"use client\";\n\nimport { useState } from \"react\";\nimport { useForm } from \"react-hook-form\";\nimport { zodResolver } from \"@hookform/resolvers/zod\";\nimport { z } from \"zod\";\nimport { useTranslations } from \"next-intl\";\nimport { useLocale } from \"next-intl\";\nimport { useRouter } from \"@/i18n/navigation\";\nimport { Link } from \"@/i18n/navigation\";\nimport { Button } from \"@/components/ui/button\";\nimport {\n  Form,\n  FormControl,\n  FormField,\n  FormItem,\n  FormLabel,\n  FormMessage,\n} from \"@/components/ui/form\";\nimport { Input } from \"@/components/ui/input\";\nimport { Alert, AlertDescription } from \"@/components/ui/alert\";\n\nconst formSchema = z.object({\n  email: z.string().email(),\n  password: z.string().min(1),\n});\n\ntype FormData = z.infer<typeof formSchema>;\n\nexport function LoginForm() {\n  const t = useTranslations(\"auth.login\");\n  const locale = useLocale();\n  const router = useRouter();\n  const [error, setError] = useState<string | null>(null);\n  const [loading, setLoading] = useState(false);\n\n  const form = useForm<FormData>({\n    resolver: zodResolver(formSchema),\n    defaultValues: { email: \"\", password: \"\" },\n  });\n\n  const onSubmit = async (data: FormData) => {\n    setLoading(true);\n    setError(null);\n\n    try {\n      const res = await fetch(\"/api/auth/login\", {\n        method: \"POST\",\n        headers: { \"Content-Type\": \"application/json\" },\n        body: JSON.stringify({ ...data, locale }),\n      });\n\n      const json = await res.json();\n\n      if (!res.ok) {\n        if (res.status === 403) {\n          setError(t(\"error_unverified\"));\n        } else {\n          setError(t(\"error_invalid\"));\n        }\n        return;\n      }\n\n      router.push(\"/members\");\n      router.refresh();\n    } catch {\n      setError(t(\"error_invalid\"));\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  return (\n    <Form {...form}>\n      <form onSubmit={form.handleSubmit(onSubmit)} className=\"space-y-4\">\n        {error && (\n          <Alert variant=\"destructive\">\n            <AlertDescription>{error}</AlertDescription>\n          </Alert>\n        )}\n\n        <FormField\n          control={form.control}\n          name=\"email\"\n          render={({ field }) => (\n            <FormItem>\n              <FormLabel>{t(\"email\")}</FormLabel>\n              <FormControl>\n                <Input\n                  type=\"email\"\n                  placeholder=\"you@example.com\"\n                  autoComplete=\"email\"\n                  {...field}\n                />\n              </FormControl>\n              <FormMessage />\n            </FormItem>\n          )}\n        />\n\n        <FormField\n          control={form.control}\n          name=\"password\"\n          render={({ field }) => (\n            <FormItem>\n              <div className=\"flex items-center justify-between\">\n                <FormLabel>{t(\"password\")}</FormLabel>\n                <Link\n                  href=\"/auth/forgot-password\"\n                  className=\"text-xs text-muted-foreground hover:text-foreground underline-offset-4 hover:underline\"\n                >\n                  {t(\"forgot_password\")}\n                </Link>\n              </div>\n              <FormControl>\n                <Input\n                  type=\"password\"\n                  autoComplete=\"current-password\"\n                  {...field}\n                />\n              </FormControl>\n              <FormMessage />\n            </FormItem>\n          )}\n        />\n\n        <Button type=\"submit\" className=\"w-full\" disabled={loading}>\n          {loading ? \"...\" : t(\"submit\")}\n        </Button>\n\n        <p className=\"text-center text-sm text-muted-foreground\">\n          {t(\"no_account\")}{\" \"}\n          <Link\n            href=\"/auth/register\"\n            className=\"font-medium text-foreground underline-offset-4 hover:underline\"\n          >\n            {t(\"register_link\")}\n          </Link>\n        </p>\n      </form>\n    </Form>\n  );\n}\n"],"names":[],"mappings":"wDAEA,EAAA,EAAA,CAAA,CAAA,OACA,EAAA,EAAA,CAAA,CAAA,OACA,EAAA,EAAA,CAAA,CAAA,OACA,EAAA,EAAA,CAAA,CAAA,OACA,EAAA,EAAA,CAAA,CAAA,OACA,EAAA,EAAA,CAAA,CAAA,OACA,EAAA,EAAA,CAAA,CAAA,OAEA,EAAA,EAAA,CAAA,CAAA,OACA,EAAA,EAAA,CAAA,CAAA,OAQA,EAAA,EAAA,CAAA,CAAA,OACA,EAAA,EAAA,CAAA,CAAA,OAEA,IAAM,EAAa,EAAA,CAAC,CAAC,MAAM,CAAC,CAC1B,MAAO,EAAA,CAAC,CAAC,MAAM,GAAG,KAAK,GACvB,SAAU,EAAA,CAAC,CAAC,MAAM,GAAG,GAAG,CAAC,EAC3B,GAIO,SAAS,IACd,IAAM,EAAI,CAAA,EAAA,EAAA,eAAA,AAAe,EAAC,cACpB,EAAS,CAAA,EAAA,EAAA,SAAA,AAAS,IAClB,EAAS,CAAA,EAAA,EAAA,SAAA,AAAS,IAClB,CAAC,EAAO,EAAS,CAAG,CAAA,EAAA,EAAA,QAAA,AAAQ,EAAgB,MAC5C,CAAC,EAAS,EAAW,CAAG,CAAA,EAAA,EAAA,QAAA,AAAQ,GAAC,GAEjC,EAAO,CAAA,EAAA,EAAA,OAAO,AAAP,EAAkB,CAC7B,SAAU,CAAA,EAAA,EAAA,WAAA,AAAW,EAAC,GACtB,cAAe,CAAE,MAAO,GAAI,SAAU,EAAG,CAC3C,GAEM,EAAW,MAAO,IACtB,GAAW,GACX,EAAS,MAET,GAAI,CACF,IAAM,EAAM,MAAM,MAAM,kBAAmB,CACzC,OAAQ,OACR,QAAS,CAAE,eAAgB,kBAAmB,EAC9C,KAAM,KAAK,SAAS,CAAC,CAAE,GAAG,CAAI,QAAE,CAAO,EACzC,GAIA,GAFa,MAAM,EAAI,IAAI,GAEvB,CAAC,EAAI,EAAE,CAAE,YACP,AAAe,KAAK,GAAhB,MAAM,CACZ,EAAS,EAAE,qBAEX,EAAS,EAAE,mBAKf,EAAO,IAAI,CAAC,YACZ,EAAO,OAAO,EAChB,CAAE,KAAM,CACN,EAAS,EAAE,iBACb,QAAU,CACR,GAAW,EACb,CACF,EAEA,MACE,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,IAAI,CAAA,CAAE,GAAG,CAAI,UACZ,CAAA,EAAA,EAAA,IAAA,EAAC,OAAA,CAAK,SAAU,EAAK,YAAY,CAAC,GAAW,UAAU,sBACpD,GACC,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,KAAK,CAAA,CAAC,QAAQ,uBACb,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,gBAAgB,CAAA,UAAE,MAIvB,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,SAAS,CAAA,CACR,QAAS,EAAK,OAAO,CACrB,KAAK,QACL,OAAQ,CAAC,OAAE,CAAK,CAAE,GAChB,CAAA,EAAA,EAAA,IAAA,EAAC,EAAA,QAAQ,CAAA,WACP,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,SAAS,CAAA,UAAE,EAAE,WACd,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,WAAW,CAAA,UACV,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,KAAK,CAAA,CACJ,KAAK,QACL,YAAY,kBACZ,aAAa,QACZ,GAAG,CAAK,KAGb,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,WAAW,CAAA,CAAA,QAKlB,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,SAAS,CAAA,CACR,QAAS,EAAK,OAAO,CACrB,KAAK,WACL,OAAQ,CAAC,CAAE,OAAK,CAAE,GAChB,CAAA,EAAA,EAAA,IAAA,EAAC,EAAA,QAAQ,CAAA,WACP,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,8CACb,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,SAAS,CAAA,UAAE,EAAE,cACd,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,IAAI,CAAA,CACH,KAAK,wBACL,UAAU,kGAET,EAAE,wBAGP,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,WAAW,CAAA,UACV,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,KAAK,CAAA,CACJ,KAAK,WACL,aAAa,mBACZ,GAAG,CAAK,KAGb,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,WAAW,CAAA,CAAA,QAKlB,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,MAAM,CAAA,CAAC,KAAK,SAAS,UAAU,SAAS,SAAU,WAChD,EAAU,MAAQ,EAAE,YAGvB,CAAA,EAAA,EAAA,IAAA,EAAC,IAAA,CAAE,UAAU,sDACV,EAAE,cAAe,IAClB,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,IAAI,CAAA,CACH,KAAK,iBACL,UAAU,0EAET,EAAE,0BAMf"}